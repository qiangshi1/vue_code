(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a74afab4"],{"177b":function(t,e,o){},2942:function(t,e,o){},"5cbe":function(t,e,o){t.exports=o.p+"img/recommend_bg.794b6628.jpg"},"804e":function(t,e,o){},"9f1c":function(t,e,o){"use strict";o("177b")},ab07:function(t,e,o){"use strict";o("2942")},b3d7:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"home"}},[o("nav-bar",{staticClass:"home-nav-bar"},[o("div",{attrs:{slot:"center"},slot:"center"},[t._v("购物街")])]),o("tab-control",{directives:[{name:"show",rawName:"v-show",value:t.isTabFixed,expression:"isTabFixed"}],ref:"tabControl1",attrs:{titles:["流行","新款","精选"]},on:{tabClick:t.tabClick}}),o("scroll",{ref:"scroll",staticClass:"content",attrs:{"probe-type":3,"pull-up-load":!0},on:{scroll:t.contentScroll,pullingUp:t.loadMore}},[o("home-swiper",{attrs:{banners:t.banners},on:{imageLoad:t.swiperImageLoad}}),o("home-recommend-view",{attrs:{recommends:t.recommends}}),o("home-feature-view"),o("tab-control",{ref:"tabControl2",attrs:{titles:["流行","新款","精选"]},on:{tabClick:t.tabClick}}),o("goods-list",{attrs:{goodsList:t.showGoods}})],1),o("back-top",{directives:[{name:"show",rawName:"v-show",value:t.isShowBackTop,expression:"isShowBackTop"}],nativeOn:{click:function(e){return t.backTopClick(e)}}})],1)},s=[],r=o("2909"),i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:"home-swiper"}},[o("swiper",t._l(t.banners,(function(e){return o("swiper-item",{key:e.background},[o("a",{attrs:{href:e.link}},[o("img",{attrs:{src:e.image,alt:""},on:{load:t.imageLoad}})])])})),1)],1)},a=[],c=o("dc2c"),l={name:"HomeSwiper",components:{Swiper:c["a"],SwiperItem:c["b"]},data:function(){return{isLoad:!1}},props:{banners:{type:Array,default:function(){return[]}}},methods:{imageLoad:function(){this.isLoad||(this.$emit("imageLoad"),this.isLoad=!0)}}},u=l,m=o("2877"),d=Object(m["a"])(u,i,a,!1,null,null,null),f=d.exports,p=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"home-recommend-view"},t._l(t.recommends,(function(e){return o("div",{key:e.id,staticClass:"home-recommend-view-item"},[o("a",{attrs:{href:e.link}},[o("img",{attrs:{src:e.image,alt:""}}),o("div",[t._v(t._s(e.title))])])])})),0)},h=[],b={name:"HomeRecommendView",props:{recommends:{type:Array,default:function(){return[]}}}},w=b,v=(o("9f1c"),Object(m["a"])(w,p,h,!1,null,"61ad2397",null)),g=v.exports,k=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},C=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home-feature-view"},[n("a",{attrs:{href:"http://www.baidu.com"}},[n("img",{attrs:{src:o("5cbe"),alt:""}})])])}],T={name:"HomeFeatureView",props:{recommends:{type:Array,default:function(){return[]}}}},_=T,y=(o("e579"),Object(m["a"])(_,k,C,!1,null,"3ab6681c",null)),$=y.exports,x=o("a7ac"),H=o("5d17"),O=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"tab-control"},t._l(t.titles,(function(e,n){return o("div",{key:n,staticClass:"tab-control-item",class:{active:n===t.currentIndex},on:{click:function(e){return t.itemClick(n)}}},[o("span",[t._v(t._s(e))])])})),0)},L=[],S={name:"TabControl",props:{titles:{type:Array,default:function(){return[]}}},data:function(){return{currentIndex:0}},methods:{itemClick:function(t){this.currentIndex=t,this.$emit("tabClick",t)}}},j=S,I=(o("ab07"),Object(m["a"])(j,O,L,!1,null,"48cfe113",null)),G=I.exports,F=o("6d71"),B=o("f8c8"),E=o("1bab");function A(){return Object(E["a"])({url:"/res"})}function M(t,e){return Object(E["a"])({url:"/goods-"+t+"-"+e})}var V=o("90b9"),Y={name:"Home",components:{HomeSwiper:f,HomeRecommendView:g,HomeFeatureView:$,NavBar:x["a"],TabControl:G,Scroll:H["a"],GoodsList:F["a"],BackTop:B["a"]},data:function(){return{result:null,banners:null,recommends:null,currentType:"pop",isShowBackTop:!1,goods:{pop:{page:1,list:[]},new_:{page:1,list:[]},sel:{page:1,list:[]}},numberForRefresh:0,tabControlOffsetTop:null,isTabFixed:!1,scrollY:0}},computed:{showGoods:function(){return this.goods[this.currentType].list}},created:function(){this.getHomeMultiData(),this.getHomeGoods("pop"),this.getHomeGoods("new"),this.getHomeGoods("sel")},mounted:function(){var t=Object(V["a"])(this.$refs.scroll.refresh,300);this.$bus.$on("itemImageLoad",(function(){t("test args!")}))},activated:function(){this.$refs.scroll.refresh(),this.$refs.scroll.scrollTo(0,this.scrollY,0)},deactivated:function(){this.scrollY=this.$refs.scroll.getScrollY()},methods:{getHomeMultiData:function(){var t=this;A().then((function(e){t.banners=e.data.banner.list,t.recommends=e.data.recommend.list}))},getHomeGoods:function(t){var e=this,o=t;"new"==o&&(o="new_"),M(t,this.goods[o].page).then((function(t){var n;(n=e.goods[o].list).push.apply(n,Object(r["a"])(t.list)),e.goods[o].page++}))},tabClick:function(t){switch(t){case 0:this.currentType="pop";break;case 1:this.currentType="new_";break;case 2:this.currentType="sel"}this.$refs.tabControl1.currentIndex=t,this.$refs.tabControl2.currentIndex=t},backTopClick:function(){this.$refs.scroll.scrollTo(0,0)},contentScroll:function(t){this.isShowBackTop=-t.y>2e3,this.isTabFixed=-t.y>this.tabControlOffsetTop},loadMore:function(){this.getHomeGoods(this.currentType),this.$refs.scroll.finishPullUp()},swiperImageLoad:function(){this.tabControlOffsetTop=this.$refs.tabControl2.$el.offsetTop}}},N=Y,R=(o("cca9"),Object(m["a"])(N,n,s,!1,null,"621c510d",null));e["default"]=R.exports},cca9:function(t,e,o){"use strict";o("f7c8")},e579:function(t,e,o){"use strict";o("804e")},f7c8:function(t,e,o){}}]);
//# sourceMappingURL=chunk-a74afab4.c86b18bf.js.map